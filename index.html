<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ä¸™åˆé©¬å¹´æ–°æ˜¥ç››å…¸ - é©¬åˆ°æˆåŠŸã€é¾™é©¬ç²¾ç¥ã€ä¸€é©¬å½“å…ˆ">
    <meta name="theme-color" content="#B91C1C">
    <title>ä¸™åˆé©¬å¹´ Â· é©¬åˆ°æˆåŠŸ</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=ZCOOL+XiaoWei&family=Noto+Serif+SC:wght@400;600;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --china-red: #B91C1C;
            --deep-red: #7F1D1D;
            --blood-red: #450A0A;
            --bright-red: #DC2626;
            --gold: #FBBF24;
            --bright-gold: #FCD34D;
            --pale-gold: #FEF3C7;
            --ink-black: #0A0A0A;
            --paper-cream: #FFFBEB;
            --lantern-orange: #F97316;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
            scroll-snap-type: y mandatory;
        }
        
        body {
            font-family: 'Noto Serif SC', serif;
            background: var(--blood-red);
            overflow-x: hidden;
            color: var(--paper-cream);
        }
        
        .scroll-container {
            position: relative;
        }
        
        .full-section {
            min-height: 100vh;
            scroll-snap-align: start;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        #bgCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }
        
        .section-content {
            position: relative;
            z-index: 10;
            width: 100%;
            max-width: 1200px;
            padding: 40px 20px;
        }
        
        /* ========== å¼€åœºè‹±é›„åŒº ========== */
        .hero-section {
            background: radial-gradient(ellipse at center bottom, rgba(185, 28, 28, 0.8) 0%, transparent 70%);
        }
        
        .hero-decoration {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .hero-decoration::before {
            content: '';
            position: absolute;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 60%;
            background: radial-gradient(ellipse, rgba(251, 191, 36, 0.15) 0%, transparent 70%);
            animation: heroGlow 4s ease-in-out infinite;
        }
        
        @keyframes heroGlow {
            0%, 100% { opacity: 0.5; transform: translateX(-50%) scale(1); }
            50% { opacity: 1; transform: translateX(-50%) scale(1.1); }
        }
        
        .hero-main {
            text-align: center;
            position: relative;
        }
        
        .hero-year-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--gold), var(--bright-gold));
            color: var(--deep-red);
            padding: 8px 30px;
            border-radius: 30px;
            font-family: 'ZCOOL XiaoWei', serif;
            font-size: 1rem;
            letter-spacing: 0.3em;
            margin-bottom: 30px;
            box-shadow: 0 0 30px rgba(251, 191, 36, 0.5);
            animation: badgeFloat 3s ease-in-out infinite;
        }
        
        @keyframes badgeFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .hero-title {
            font-family: 'Ma Shan Zheng', cursive;
            font-size: clamp(5rem, 15vw, 12rem);
            background: linear-gradient(180deg, var(--bright-gold) 0%, var(--gold) 50%, #D97706 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 0 60px rgba(251, 191, 36, 0.8));
            letter-spacing: 0.15em;
            line-height: 1.1;
            position: relative;
        }
        
        .hero-title::after {
            content: 'ğŸ´';
            position: absolute;
            top: -20%;
            right: -15%;
            font-size: 0.3em;
            -webkit-text-fill-color: initial;
            animation: horseNod 2s ease-in-out infinite;
            filter: drop-shadow(0 0 20px var(--gold));
        }
        
        @keyframes horseNod {
            0%, 100% { transform: rotate(-15deg) translateY(0); }
            50% { transform: rotate(15deg) translateY(-10px); }
        }
        
        .hero-subtitle {
            font-family: 'ZCOOL XiaoWei', serif;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            color: var(--pale-gold);
            margin-top: 20px;
            letter-spacing: 0.5em;
            text-shadow: 0 0 30px rgba(251, 191, 36, 0.5);
        }
        
        .hero-blessing-row {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 50px;
            flex-wrap: wrap;
        }
        
        .blessing-chip {
            background: linear-gradient(135deg, rgba(185, 28, 28, 0.8), rgba(127, 29, 29, 0.9));
            border: 2px solid var(--gold);
            padding: 12px 25px;
            border-radius: 40px;
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 1.2rem;
            color: var(--bright-gold);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }
        
        .blessing-chip:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 30px rgba(251, 191, 36, 0.4);
        }
        
        .scroll-hint {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            animation: scrollBounce 2s ease-in-out infinite;
        }
        
        @keyframes scrollBounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(15px); }
        }
        
        .scroll-hint span {
            font-size: 0.9rem;
            color: var(--pale-gold);
            opacity: 0.8;
            letter-spacing: 0.2em;
        }
        
        .scroll-arrow {
            width: 30px;
            height: 30px;
            border-right: 3px solid var(--gold);
            border-bottom: 3px solid var(--gold);
            transform: rotate(45deg);
        }
        
        /* ========== å€’è®¡æ—¶åŒº - è·‘é©¬åœº ========== */
        .countdown-section {
            background: linear-gradient(180deg, var(--blood-red) 0%, var(--deep-red) 100%);
        }
        
        .race-track-container {
            width: 100%;
            position: relative;
        }
        
        .countdown-header {
            text-align: center;
            margin-bottom: 60px;
        }
        
        .countdown-title {
            font-family: 'Ma Shan Zheng', cursive;
            font-size: clamp(2.5rem, 6vw, 4rem);
            color: var(--bright-gold);
            text-shadow: 0 0 40px rgba(251, 191, 36, 0.6);
        }
        
        .countdown-date {
            font-family: 'ZCOOL XiaoWei', serif;
            font-size: 1.2rem;
            color: var(--pale-gold);
            margin-top: 15px;
            opacity: 0.9;
        }
        
        .countdown-date span {
            color: var(--gold);
            font-weight: 700;
        }
        
        .race-track {
            position: relative;
            height: 200px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(251, 191, 36, 0.1) 10%, 
                rgba(251, 191, 36, 0.1) 90%, 
                transparent 100%);
            border-radius: 100px;
            margin: 40px 0;
            overflow: hidden;
        }
        
        .track-ground {
            position: absolute;
            top: 50%;
            left: 5%;
            right: 5%;
            height: 8px;
            background: repeating-linear-gradient(90deg, 
                var(--gold) 0px, 
                var(--gold) 30px, 
                transparent 30px, 
                transparent 50px);
            transform: translateY(-50%);
            opacity: 0.4;
        }
        
        .track-start, .track-end {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 3rem;
            z-index: 5;
        }
        
        .track-start {
            left: 3%;
        }
        
        .track-end {
            right: 3%;
        }
        
        .running-horse-container {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            transition: left 0.5s ease-out;
        }
        
        .running-horse {
            font-size: 4rem;
            filter: drop-shadow(0 0 20px var(--gold));
            animation: horseGallop 0.4s steps(2) infinite;
        }
        
        @keyframes horseGallop {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }
        
        .countdown-cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-top: 40px;
        }
        
        .countdown-card {
            background: linear-gradient(145deg, rgba(185, 28, 28, 0.6), rgba(69, 10, 10, 0.8));
            border: 2px solid var(--gold);
            border-radius: 20px;
            padding: 30px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .countdown-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(251, 191, 36, 0.2), transparent);
            animation: cardShine 3s infinite;
        }
        
        @keyframes cardShine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .countdown-value {
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 4rem;
            color: var(--bright-gold);
            text-shadow: 0 0 30px rgba(251, 191, 36, 0.8);
            position: relative;
            z-index: 1;
        }
        
        .countdown-unit {
            font-family: 'ZCOOL XiaoWei', serif;
            font-size: 1.2rem;
            color: var(--pale-gold);
            margin-top: 10px;
            letter-spacing: 0.3em;
            position: relative;
            z-index: 1;
        }
        
        /* ========== ç¯ç¬¼ç¥ç¦å¢™ ========== */
        .lantern-section {
            background: radial-gradient(ellipse at center, rgba(127, 29, 29, 0.5) 0%, var(--blood-red) 70%);
        }
        
        .lantern-wall {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
            perspective: 1000px;
        }
        
        .lantern {
            position: relative;
            cursor: pointer;
            transform-style: preserve-3d;
            animation: lanternSwing 4s ease-in-out infinite;
        }
        
        .lantern:nth-child(2) { animation-delay: -1s; }
        .lantern:nth-child(3) { animation-delay: -2s; }
        .lantern:nth-child(4) { animation-delay: -3s; }
        .lantern:nth-child(5) { animation-delay: -0.5s; }
        
        @keyframes lanternSwing {
            0%, 100% { transform: rotate(-5deg); }
            50% { transform: rotate(5deg); }
        }
        
        .lantern:hover {
            animation-play-state: paused;
        }
        
        .lantern-rope {
            width: 4px;
            height: 40px;
            background: var(--gold);
            margin: 0 auto;
        }
        
        .lantern-body {
            width: 100px;
            height: 140px;
            background: linear-gradient(180deg, var(--bright-red) 0%, var(--china-red) 50%, var(--deep-red) 100%);
            border-radius: 50px;
            position: relative;
            box-shadow: 
                0 0 30px rgba(251, 191, 36, 0.5),
                inset 0 -20px 40px rgba(0, 0, 0, 0.3),
                inset 0 20px 40px rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .lantern-body::before,
        .lantern-body::after {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 120%;
            height: 20px;
            background: linear-gradient(90deg, var(--gold), var(--bright-gold), var(--gold));
            border-radius: 10px;
        }
        
        .lantern-body::before { top: 0; }
        .lantern-body::after { bottom: 0; }
        
        .lantern-text {
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 2.5rem;
            color: var(--bright-gold);
            text-shadow: 0 0 20px var(--gold);
            writing-mode: vertical-rl;
        }
        
        .lantern-tassel {
            width: 30px;
            height: 60px;
            margin: 0 auto;
            position: relative;
        }
        
        .tassel-string {
            width: 2px;
            height: 30px;
            background: var(--gold);
            margin: 0 auto;
        }
        
        .tassel-fringe {
            width: 30px;
            height: 30px;
            background: linear-gradient(180deg, var(--gold), var(--bright-gold));
            border-radius: 0 0 15px 15px;
            position: relative;
        }
        
        .tassel-fringe::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 10px;
            height: 20px;
            background: var(--gold);
            border-radius: 0 0 5px 5px;
        }
        
        .lantern-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 150%;
            height: 150%;
            background: radial-gradient(ellipse, rgba(251, 191, 36, 0.3) 0%, transparent 70%);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .lantern:hover .lantern-glow {
            opacity: 1;
        }
        
        .blessing-input-area {
            margin-top: 60px;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .blessing-input {
            flex: 1;
            min-width: 250px;
            max-width: 400px;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid var(--gold);
            border-radius: 30px;
            padding: 15px 25px;
            color: var(--paper-cream);
            font-family: inherit;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .blessing-input:focus {
            outline: none;
            box-shadow: 0 0 30px rgba(251, 191, 36, 0.4);
        }
        
        .blessing-input::placeholder {
            color: rgba(254, 243, 199, 0.5);
        }
        
        .send-blessing-btn {
            background: linear-gradient(135deg, var(--gold), var(--bright-gold));
            color: var(--deep-red);
            border: none;
            padding: 15px 40px;
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 1.2rem;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 0.1em;
            box-shadow: 0 5px 20px rgba(251, 191, 36, 0.4);
        }
        
        .send-blessing-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(251, 191, 36, 0.6);
        }
        
        /* ========== è¿åŠ¿ç­¾ç­’ ========== */
        .fortune-section {
            background: linear-gradient(180deg, var(--blood-red) 0%, var(--ink-black) 100%);
        }
        
        .fortune-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
        }
        
        @media (max-width: 900px) {
            .fortune-container {
                grid-template-columns: 1fr;
            }
        }
        
        .fortune-barrel-area {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .fortune-barrel {
            position: relative;
            width: 200px;
            height: 280px;
        }
        
        .barrel-body {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 180px;
            height: 220px;
            background: linear-gradient(135deg, var(--china-red), var(--deep-red));
            border-radius: 20px 20px 30px 30px;
            box-shadow: 
                0 20px 50px rgba(0, 0, 0, 0.5),
                inset 0 -30px 50px rgba(0, 0, 0, 0.3),
                0 0 0 4px var(--gold);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .barrel-label {
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 3rem;
            color: var(--bright-gold);
            text-shadow: 0 0 30px var(--gold);
        }
        
        .fortune-sticks {
            position: absolute;
            bottom: 200px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 4px;
        }
        
        .fortune-stick {
            width: 10px;
            height: 150px;
            background: linear-gradient(180deg, var(--bright-gold), var(--gold), #D97706);
            border-radius: 5px 5px 0 0;
            transform-origin: bottom center;
            transition: transform 0.3s ease;
            box-shadow: 0 0 15px rgba(251, 191, 36, 0.5);
        }
        
        .fortune-stick:hover {
            transform: translateY(-30px) rotate(10deg);
        }
        
        .fortune-stick.shaking {
            animation: stickShake 0.5s ease-in-out;
        }
        
        @keyframes stickShake {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-40px) rotate(-8deg); }
            75% { transform: translateY(-40px) rotate(8deg); }
        }
        
        .draw-fortune-btn {
            margin-top: 40px;
            background: linear-gradient(135deg, var(--bright-red), var(--china-red));
            color: var(--bright-gold);
            border: 3px solid var(--gold);
            padding: 18px 50px;
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 0.2em;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        }
        
        .draw-fortune-btn:hover:not(:disabled) {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(251, 191, 36, 0.4);
        }
        
        .draw-fortune-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .fortune-result {
            margin-top: 30px;
            padding: 30px;
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(185, 28, 28, 0.2));
            border: 2px solid var(--gold);
            border-radius: 20px;
            text-align: center;
            display: none;
            animation: resultReveal 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .fortune-result.show {
            display: block;
        }
        
        @keyframes resultReveal {
            0% { transform: scale(0.5) rotate(-10deg); opacity: 0; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        
        .fortune-level {
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 3rem;
            color: var(--bright-gold);
            text-shadow: 0 0 30px var(--gold);
        }
        
        .fortune-text {
            font-size: 1.1rem;
            color: var(--pale-gold);
            margin-top: 15px;
            line-height: 1.8;
        }
        
        .fortune-display {
            text-align: center;
        }
        
        .fortune-display-title {
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 2.5rem;
            color: var(--bright-gold);
            margin-bottom: 30px;
        }
        
        /* ========== å‰ªçº¸è´ºå¡ ========== */
        .card-section {
            background: var(--ink-black);
        }
        
        .card-workshop {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: start;
        }
        
        @media (max-width: 900px) {
            .card-workshop {
                grid-template-columns: 1fr;
            }
        }
        
        .card-options {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .option-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .option-label {
            font-family: 'ZCOOL XiaoWei', serif;
            color: var(--bright-gold);
            font-size: 1rem;
        }
        
        .option-input {
            background: rgba(185, 28, 28, 0.3);
            border: 2px solid rgba(251, 191, 36, 0.3);
            border-radius: 15px;
            padding: 15px 20px;
            color: var(--paper-cream);
            font-family: inherit;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .option-input:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.2);
        }
        
        .style-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .style-card {
            aspect-ratio: 4/3;
            border-radius: 15px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .style-card::before {
            content: '';
            position: absolute;
            inset: 0;
            z-index: 0;
        }
        
        .style-card.red::before {
            background: linear-gradient(135deg, var(--bright-red), var(--deep-red));
        }
        
        .style-card.gold::before {
            background: linear-gradient(135deg, var(--gold), #D97706);
        }
        
        .style-card.ink::before {
            background: linear-gradient(135deg, #1F1F1F, #0A0A0A);
        }
        
        .style-card.paper::before {
            background: linear-gradient(135deg, var(--paper-cream), #FEF3C7);
        }
        
        .style-card.selected {
            border-color: var(--gold);
            box-shadow: 0 0 30px rgba(251, 191, 36, 0.6);
            transform: scale(1.02);
        }
        
        .style-icon {
            font-size: 2rem;
            position: relative;
            z-index: 1;
        }
        
        .style-name {
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 1.1rem;
            position: relative;
            z-index: 1;
            margin-top: 8px;
        }
        
        .style-card.red .style-name,
        .style-card.ink .style-name {
            color: var(--pale-gold);
        }
        
        .style-card.gold .style-name,
        .style-card.paper .style-name {
            color: var(--deep-red);
        }
        
        .generate-btn {
            background: linear-gradient(135deg, var(--china-red), var(--deep-red));
            color: var(--bright-gold);
            border: 2px solid var(--gold);
            padding: 18px 40px;
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 1.3rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 0.15em;
            margin-top: 10px;
        }
        
        .generate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(185, 28, 28, 0.5);
        }
        
        .card-preview {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .preview-frame {
            position: relative;
            padding: 15px;
            background: linear-gradient(135deg, var(--gold), var(--bright-gold));
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }
        
        .preview-canvas {
            display: block;
            border-radius: 10px;
        }
        
        .download-btn {
            margin-top: 25px;
            background: linear-gradient(135deg, var(--gold), var(--bright-gold));
            color: var(--deep-red);
            border: none;
            padding: 15px 35px;
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 1.1rem;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 0.1em;
        }
        
        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(251, 191, 36, 0.5);
        }
        
        /* ========== é¡µè„š ========== */
        .footer-section {
            background: linear-gradient(180deg, var(--ink-black) 0%, var(--blood-red) 100%);
            min-height: 50vh;
        }
        
        .footer-content {
            text-align: center;
        }
        
        .footer-horse-parade {
            font-size: 3rem;
            margin-bottom: 30px;
        }
        
        .footer-horse-parade span {
            display: inline-block;
            animation: horseGallop 0.4s steps(2) infinite;
            margin: 0 5px;
        }
        
        .footer-horse-parade span:nth-child(2) { animation-delay: 0.1s; }
        .footer-horse-parade span:nth-child(3) { animation-delay: 0.2s; }
        .footer-horse-parade span:nth-child(4) { animation-delay: 0.3s; }
        .footer-horse-parade span:nth-child(5) { animation-delay: 0.4s; }
        
        .footer-main-text {
            font-family: 'Ma Shan Zheng', cursive;
            font-size: clamp(2rem, 5vw, 3.5rem);
            background: linear-gradient(135deg, var(--bright-gold), var(--gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 0 30px rgba(251, 191, 36, 0.6));
            margin-bottom: 20px;
        }
        
        .footer-sub-text {
            font-family: 'ZCOOL XiaoWei', serif;
            font-size: 1.2rem;
            color: var(--pale-gold);
            opacity: 0.8;
            letter-spacing: 0.3em;
        }
        
        .footer-divider {
            width: 200px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
            margin: 30px auto;
        }
        
        .footer-year {
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 1.5rem;
            color: var(--bright-gold);
        }
        
        /* ========== æµ®åŠ¨æ§åˆ¶ ========== */
        .float-controls {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .float-btn {
            width: 55px;
            height: 55px;
            border-radius: 50%;
            background: linear-gradient(145deg, var(--china-red), var(--deep-red));
            border: 2px solid var(--gold);
            color: var(--bright-gold);
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
        }
        
        .float-btn:hover {
            transform: scale(1.1);
        }
        
        .float-btn.active {
            background: linear-gradient(145deg, var(--gold), var(--bright-gold));
            color: var(--deep-red);
        }
        
        /* ========== çº¢åŒ…é›¨ ========== */
        .red-packet {
            position: fixed;
            font-size: 2rem;
            pointer-events: none;
            z-index: 999;
            animation: redPacketFall linear forwards;
            filter: drop-shadow(0 0 10px rgba(251, 191, 36, 0.5));
        }
        
        @keyframes redPacketFall {
            0% {
                transform: translateY(-50px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        
        /* ========== å“åº”å¼ ========== */
        @media (max-width: 768px) {
            .countdown-cards {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .lantern-wall {
                gap: 20px;
            }
            
            .lantern-body {
                width: 80px;
                height: 110px;
            }
            
            .lantern-text {
                font-size: 2rem;
            }
            
            .style-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .race-track {
                height: 150px;
            }
            
            .running-horse {
                font-size: 3rem;
            }
        }
        
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <canvas id="bgCanvas"></canvas>
    
    <div class="scroll-container">
        <!-- è‹±é›„åŒº -->
        <section class="full-section hero-section">
            <div class="hero-decoration"></div>
            <div class="section-content hero-main">
                <div class="hero-year-badge">ä¸™åˆé©¬å¹´ Â· 2026</div>
                <h1 class="hero-title">é©¬åˆ°æˆåŠŸ</h1>
                <p class="hero-subtitle">é¾™é©¬ç²¾ç¥ Â· ä¸€é©¬å½“å…ˆ</p>
                <div class="hero-blessing-row">
                    <div class="blessing-chip" data-blessing="é©¬åˆ°æˆåŠŸ">ğŸ´ é©¬åˆ°æˆåŠŸ</div>
                    <div class="blessing-chip" data-blessing="é¾™é©¬ç²¾ç¥">âœ¨ é¾™é©¬ç²¾ç¥</div>
                    <div class="blessing-chip" data-blessing="ä¸€é©¬å½“å…ˆ">ğŸ† ä¸€é©¬å½“å…ˆ</div>
                    <div class="blessing-chip" data-blessing="ä¸‡äº‹å¦‚æ„">ğŸ§§ ä¸‡äº‹å¦‚æ„</div>
                </div>
            </div>
            <div class="scroll-hint">
                <span>å‘ä¸‹æ»‘åŠ¨</span>
                <div class="scroll-arrow"></div>
            </div>
        </section>
        
        <!-- å€’è®¡æ—¶è·‘é©¬åœº -->
        <section class="full-section countdown-section">
            <div class="section-content">
                <div class="countdown-header">
                    <h2 class="countdown-title">ğŸ‡ æ˜¥èŠ‚å€’è®¡æ—¶</h2>
                    <p class="countdown-date"><span>2026å¹´2æœˆ17æ—¥</span> å†œå†æ­£æœˆåˆä¸€ Â· ä¸™åˆé©¬å¹´</p>
                </div>
                
                <div class="race-track">
                    <div class="track-ground"></div>
                    <div class="track-start">ğŸ</div>
                    <div class="track-end">ğŸ†</div>
                    <div class="running-horse-container" id="horseRunner">
                        <div class="running-horse">ğŸ´</div>
                    </div>
                </div>
                
                <div class="countdown-cards">
                    <div class="countdown-card">
                        <div class="countdown-value" id="days">00</div>
                        <div class="countdown-unit">å¤©</div>
                    </div>
                    <div class="countdown-card">
                        <div class="countdown-value" id="hours">00</div>
                        <div class="countdown-unit">æ—¶</div>
                    </div>
                    <div class="countdown-card">
                        <div class="countdown-value" id="minutes">00</div>
                        <div class="countdown-unit">åˆ†</div>
                    </div>
                    <div class="countdown-card">
                        <div class="countdown-value" id="seconds">00</div>
                        <div class="countdown-unit">ç§’</div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- ç¯ç¬¼ç¥ç¦å¢™ -->
        <section class="full-section lantern-section">
            <div class="section-content">
                <div class="countdown-header">
                    <h2 class="countdown-title">ğŸ® ç¥ç¦ç¯ç¬¼å¢™</h2>
                    <p class="countdown-date">ç‚¹å‡»ç¯ç¬¼é€ä¸Šç¥ç¦</p>
                </div>
                
                <div class="lantern-wall" id="lanternWall">
                    <div class="lantern" data-blessing="ç¦">
                        <div class="lantern-rope"></div>
                        <div class="lantern-body">
                            <span class="lantern-text">ç¦</span>
                            <div class="lantern-glow"></div>
                        </div>
                        <div class="lantern-tassel">
                            <div class="tassel-string"></div>
                            <div class="tassel-fringe"></div>
                        </div>
                    </div>
                    <div class="lantern" data-blessing="ç¦„">
                        <div class="lantern-rope"></div>
                        <div class="lantern-body">
                            <span class="lantern-text">ç¦„</span>
                            <div class="lantern-glow"></div>
                        </div>
                        <div class="lantern-tassel">
                            <div class="tassel-string"></div>
                            <div class="tassel-fringe"></div>
                        </div>
                    </div>
                    <div class="lantern" data-blessing="å¯¿">
                        <div class="lantern-rope"></div>
                        <div class="lantern-body">
                            <span class="lantern-text">å¯¿</span>
                            <div class="lantern-glow"></div>
                        </div>
                        <div class="lantern-tassel">
                            <div class="tassel-string"></div>
                            <div class="tassel-fringe"></div>
                        </div>
                    </div>
                    <div class="lantern" data-blessing="å–œ">
                        <div class="lantern-rope"></div>
                        <div class="lantern-body">
                            <span class="lantern-text">å–œ</span>
                            <div class="lantern-glow"></div>
                        </div>
                        <div class="lantern-tassel">
                            <div class="tassel-string"></div>
                            <div class="tassel-fringe"></div>
                        </div>
                    </div>
                    <div class="lantern" data-blessing="è´¢">
                        <div class="lantern-rope"></div>
                        <div class="lantern-body">
                            <span class="lantern-text">è´¢</span>
                            <div class="lantern-glow"></div>
                        </div>
                        <div class="lantern-tassel">
                            <div class="tassel-string"></div>
                            <div class="tassel-fringe"></div>
                        </div>
                    </div>
                </div>
                
                <div class="blessing-input-area">
                    <input type="text" class="blessing-input" id="blessingInput" placeholder="å†™ä¸‹ä½ çš„é©¬å¹´ç¥ç¦..." maxlength="30">
                    <button class="send-blessing-btn" id="sendBlessing">å‘é€ç¥ç¦ ğŸ´</button>
                </div>
            </div>
        </section>
        
        <!-- è¿åŠ¿ç­¾ç­’ -->
        <section class="full-section fortune-section">
            <div class="section-content">
                <div class="fortune-container">
                    <div class="fortune-barrel-area">
                        <div class="fortune-barrel">
                            <div class="fortune-sticks" id="fortuneSticks"></div>
                            <div class="barrel-body">
                                <span class="barrel-label">æ±‚ç­¾</span>
                            </div>
                        </div>
                        <button class="draw-fortune-btn" id="drawBtn">æ‘‡ç­¾ç¥ˆç¦</button>
                    </div>
                    
                    <div class="fortune-display">
                        <h3 class="fortune-display-title">ğŸ´ é©¬å¹´è¿åŠ¿</h3>
                        <div class="fortune-result" id="fortuneResult">
                            <div class="fortune-level" id="fortuneLevel">ä¸Šä¸Šç­¾</div>
                            <div class="fortune-text" id="fortuneText"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- é©¬å¹´å¹¸è¿è½¬ç›˜ -->
        <section class="full-section" style="background: linear-gradient(180deg, var(--deep-red) 0%, var(--blood-red) 100%);">
            <div class="section-content">
                <div class="countdown-header">
                    <h2 class="countdown-title">ğŸ° é©¬å¹´å¹¸è¿è½¬ç›˜</h2>
                    <p class="countdown-date">è½¬åŠ¨è½¬ç›˜ï¼Œèµ¢å–é©¬å¹´ç¥ç¦</p>
                </div>
                
                <div style="display: flex; justify-content: center; align-items: center; margin-top: 40px;">
                    <div style="position: relative; width: 300px; height: 300px;">
                        <div id="luckWheel" style="width: 100%; height: 100%; border-radius: 50%; background: conic-gradient(
                            var(--bright-red) 0deg 60deg,
                            var(--gold) 60deg 120deg,
                            var(--bright-red) 120deg 180deg,
                            var(--gold) 180deg 240deg,
                            var(--bright-red) 240deg 300deg,
                            var(--gold) 300deg 360deg
                        ); box-shadow: 0 0 50px rgba(251, 191, 36, 0.5); border: 4px solid var(--gold); cursor: pointer;"></div>
                        <div style="position: absolute; top: -20px; left: 50%; transform: translateX(-50%); width: 40px; height: 40px; background: var(--gold); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; box-shadow: 0 0 20px rgba(251, 191, 36, 0.8);">ğŸ¯</div>
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                            <div style="font-family: 'Ma Shan Zheng', cursive; font-size: 1.8rem; color: var(--bright-gold); text-shadow: 0 0 20px var(--gold);">è½¬ä¸€è½¬</div>
                            <div style="font-size: 0.9rem; color: var(--pale-gold); margin-top: 10px;">å¥½è¿æ»šæ»šæ¥</div>
                        </div>
                    </div>
                </div>
                
                <div id="wheelResult" style="text-align: center; margin-top: 40px; padding: 20px; background: rgba(0,0,0,0.3); border: 2px solid var(--gold); border-radius: 20px; display: none;">
                    <div style="font-family: 'Ma Shan Zheng', cursive; font-size: 2rem; color: var(--bright-gold); margin-bottom: 10px;">ğŸ‰ æ­å–œè·å¾—</div>
                    <div id="wheelPrize" style="font-size: 1.2rem; color: var(--pale-gold); line-height: 1.6;"></div>
                </div>
            </div>
        </section>
        
        <!-- å‰ªçº¸è´ºå¡ -->
        <section class="full-section card-section">
            <div class="section-content">
                <div class="countdown-header">
                    <h2 class="countdown-title">âœ‚ï¸ å‰ªçº¸è´ºå¡å·¥åŠ</h2>
                    <p class="countdown-date">åˆ¶ä½œä¸“å±é©¬å¹´è´ºå¡</p>
                </div>
                
                <div class="card-workshop">
                    <div class="card-options">
                        <div class="option-group">
                            <label class="option-label">æ”¶ä»¶äºº</label>
                            <input type="text" class="option-input" id="recipientInput" placeholder="è¯·è¾“å…¥æ”¶ä»¶äººå§“å" maxlength="10">
                        </div>
                        <div class="option-group">
                            <label class="option-label">å‘ä»¶äºº</label>
                            <input type="text" class="option-input" id="senderInput" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å" maxlength="10">
                        </div>
                        <div class="option-group">
                            <label class="option-label">ç¥ç¦è¯­</label>
                            <textarea class="option-input" id="messageInput" rows="3" placeholder="é©¬åˆ°æˆåŠŸï¼Œä¸‡äº‹å¦‚æ„ï¼" maxlength="50">é©¬åˆ°æˆåŠŸï¼Œä¸‡äº‹å¦‚æ„ï¼é¾™é©¬ç²¾ç¥ï¼Œå‰ç¨‹ä¼¼é”¦ï¼</textarea>
                            <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px;">
                                <button class="blessing-chip" style="font-size: 0.9rem; padding: 6px 15px;" onclick="DOM.messageInput.value='é©¬åˆ°æˆåŠŸï¼Œäº‹ä¸šè…¾é£ï¼'">ğŸ´ äº‹ä¸šè…¾é£</button>
                                <button class="blessing-chip" style="font-size: 0.9rem; padding: 6px 15px;" onclick="DOM.messageInput.value='é¾™é©¬ç²¾ç¥ï¼Œå¥åº·é•¿å¯¿ï¼'">âœ¨ å¥åº·é•¿å¯¿</button>
                                <button class="blessing-chip" style="font-size: 0.9rem; padding: 6px 15px;" onclick="DOM.messageInput.value='ä¸€é©¬å½“å…ˆï¼Œå­¦ä¸šæœ‰æˆï¼'">ğŸ† å­¦ä¸šæœ‰æˆ</button>
                                <button class="blessing-chip" style="font-size: 0.9rem; padding: 6px 15px;" onclick="DOM.messageInput.value='ä¸‡é©¬å¥”è…¾ï¼Œè´¢è¿äº¨é€šï¼'">ğŸ’° è´¢è¿äº¨é€š</button>
                            </div>
                        </div>
                        <div class="option-group">
                            <label class="option-label">é€‰æ‹©é£æ ¼</label>
                            <div class="style-grid">
                                <div class="style-card red selected" data-style="red">
                                    <span class="style-icon">ğŸ®</span>
                                    <span class="style-name">ä¸­å›½çº¢</span>
                                </div>
                                <div class="style-card gold" data-style="gold">
                                    <span class="style-icon">âœ¨</span>
                                    <span class="style-name">ç’€ç’¨é‡‘</span>
                                </div>
                                <div class="style-card ink" data-style="ink">
                                    <span class="style-icon">ğŸ–Œï¸</span>
                                    <span class="style-name">æ°´å¢¨é»‘</span>
                                </div>
                                <div class="style-card paper" data-style="paper">
                                    <span class="style-icon">ğŸ“œ</span>
                                    <span class="style-name">å®£çº¸ç™½</span>
                                </div>
                            </div>
                        </div>
                        <button class="generate-btn" id="generateCard">ç”Ÿæˆè´ºå¡ ğŸ´</button>
                    </div>
                    
                    <div class="card-preview">
                        <div class="preview-frame">
                            <canvas class="preview-canvas" id="cardCanvas" width="400" height="300"></canvas>
                        </div>
                        <button class="download-btn" id="downloadCard">ä¸‹è½½è´ºå¡</button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- é¡µè„š -->
        <section class="full-section footer-section">
            <div class="section-content footer-content">
                <div class="footer-horse-parade">
                    <span>ğŸ´</span>
                    <span>ğŸ´</span>
                    <span>ğŸ´</span>
                    <span>ğŸ´</span>
                    <span>ğŸ´</span>
                </div>
                <h2 class="footer-main-text">ä¸™åˆé©¬å¹´ Â· é©¬åˆ°æˆåŠŸ</h2>
                <p class="footer-sub-text">ç¥æ‚¨é¾™é©¬ç²¾ç¥ï¼Œå‰ç¨‹ä¼¼é”¦</p>
                <div class="footer-divider"></div>
                <p class="footer-year">2026 Â· æ–°æ˜¥å¿«ä¹</p>
            </div>
        </section>
    </div>
    
    <div class="float-controls">
        <button class="float-btn active" id="particleBtn" title="ç¥¥äº‘ç²’å­">â˜ï¸</button>
        <button class="float-btn" id="fireworkBtn" title="çƒŸèŠ±">ğŸ†</button>
        <button class="float-btn" id="redPacketBtn" title="çº¢åŒ…é›¨">ğŸ§§</button>
    </div>
    
    <script>
    (function() {
        'use strict';
        
        const CONFIG = {
            springFestival: new Date('2026-02-17T00:00:00').getTime(),
            fortunes: [
                { level: 'ä¸Šä¸Šç­¾', text: 'é¾™é©¬ç²¾ç¥ï¼Œäº‹ä¸šè…¾é£ï¼è´µäººç›¸åŠ©ï¼Œä¸‡äº‹äº¨é€šï¼é©¬åˆ°æˆåŠŸï¼Œè´¢æºå¹¿è¿›ï¼' },
                { level: 'ä¸Šç­¾', text: 'ä¸€é©¬å½“å…ˆï¼Œå‰ç¨‹ä¼¼é”¦ï¼é©¬å¹´è¡Œå¤§è¿ï¼Œå¥½è¿è¿è¿æ¥ï¼' },
                { level: 'ä¸Šç­¾', text: 'å¿«é©¬åŠ é­ï¼Œæ¢¦æƒ³æˆçœŸï¼è´µäººæ‰¶æŒï¼Œè¯¸äº‹é¡ºé‚ï¼' },
                { level: 'ä¸­ä¸Šç­¾', text: 'ç­–é©¬æ‰¬é­ï¼Œå‹‡å¾€ç›´å‰ï¼è™½æœ‰æ³¢æŠ˜ï¼Œç»ˆå°†æˆåŠŸï¼' },
                { level: 'ä¸­ç­¾', text: 'ç¨³æ‰ç¨³æ‰“ï¼Œæ­¥æ­¥ä¸ºè¥ï¼è€å¿ƒç­‰å¾…ï¼Œæ—¶æœºå°†è‡³ï¼' },
                { level: 'ä¸­ç­¾', text: 'åƒé‡Œé©¬å¸¸æœ‰ï¼Œä¼¯ä¹ç»ˆä¼šæ¥ï¼åšæŒåŠªåŠ›ï¼Œå¿…æœ‰æ”¶è·ï¼' },
                { level: 'ä¸­ä¸‹ç­¾', text: 'è„šè¸å®åœ°ï¼Œåˆ‡å‹¿æ€¥èºï¼å®ˆå¾—äº‘å¼€è§æœˆæ˜ï¼' },
                { level: 'ä¸‹ç­¾', text: 'éŸ¬å…‰å…»æ™¦ï¼Œè“„åŠ¿å¾…å‘ï¼æš‚é¿é”‹èŠ’ï¼Œé™å¾…æ—¶æœºï¼' },
                { level: 'ä¸Šä¸Šç­¾', text: 'ä¸‡é©¬å¥”è…¾ï¼Œè´¢è¿äº¨é€šï¼å…«æ–¹æ¥è´¢ï¼Œå¯Œè´µå‰ç¥¥ï¼' },
                { level: 'ä¸Šç­¾', text: 'é©¬åˆ°åŠŸæˆï¼Œå­¦ä¸šæœ‰æˆï¼é‡‘æ¦œé¢˜åï¼Œå‰ç¨‹æ— é‡ï¼' },
                { level: 'ä¸Šç­¾', text: 'é¾™é©¬ç²¾ç¥ï¼Œå¥åº·é•¿å¯¿ï¼èº«ä½“å®‰åº·ï¼Œç¦å¯¿åŒå…¨ï¼' },
                { level: 'ä¸­ä¸Šç­¾', text: 'ä¸€é©¬å¹³å·ï¼Œçˆ±æƒ…ç¾æ»¡ï¼è‰¯ç¼˜å¤©å®šï¼Œå¹¸ç¦é•¿ä¹…ï¼' },
                { level: 'ä¸­ç­¾', text: 'é©¬ä¸åœè¹„ï¼Œäº‹ä¸šæœ‰æˆï¼åŠªåŠ›å¥‹æ–—ï¼Œç»ˆæœ‰å›æŠ¥ï¼' },
                { level: 'ä¸­ä¸‹ç­¾', text: 'è€é©¬è¯†é€”ï¼Œç»éªŒä¸°å¯Œï¼å®¡æ—¶åº¦åŠ¿ï¼Œå¿…æœ‰è½¬æœºï¼' }
            ],
            cardStyles: {
                red: {
                    bg: ['#DC2626', '#7F1D1D'],
                    accent: '#FBBF24',
                    text: '#FFFBEB',
                    border: '#FBBF24'
                },
                gold: {
                    bg: ['#FBBF24', '#D97706'],
                    accent: '#7F1D1D',
                    text: '#1F1F1F',
                    border: '#7F1D1D'
                },
                ink: {
                    bg: ['#1F1F1F', '#0A0A0A'],
                    accent: '#FBBF24',
                    text: '#FFFBEB',
                    border: '#FBBF24'
                },
                paper: {
                    bg: ['#FFFBEB', '#FEF3C7'],
                    accent: '#7F1D1D',
                    text: '#1F1F1F',
                    border: '#7F1D1D'
                }
            }
        };
        
        const DOM = {
            bgCanvas: document.getElementById('bgCanvas'),
            horseRunner: document.getElementById('horseRunner'),
            days: document.getElementById('days'),
            hours: document.getElementById('hours'),
            minutes: document.getElementById('minutes'),
            seconds: document.getElementById('seconds'),
            lanternWall: document.getElementById('lanternWall'),
            blessingInput: document.getElementById('blessingInput'),
            sendBlessing: document.getElementById('sendBlessing'),
            fortuneSticks: document.getElementById('fortuneSticks'),
            drawBtn: document.getElementById('drawBtn'),
            fortuneResult: document.getElementById('fortuneResult'),
            fortuneLevel: document.getElementById('fortuneLevel'),
            fortuneText: document.getElementById('fortuneText'),
            recipientInput: document.getElementById('recipientInput'),
            senderInput: document.getElementById('senderInput'),
            messageInput: document.getElementById('messageInput'),
            styleCards: document.querySelectorAll('.style-card'),
            generateCard: document.getElementById('generateCard'),
            cardCanvas: document.getElementById('cardCanvas'),
            downloadCard: document.getElementById('downloadCard'),
            particleBtn: document.getElementById('particleBtn'),
            fireworkBtn: document.getElementById('fireworkBtn'),
            redPacketBtn: document.getElementById('redPacketBtn'),
            blessingChips: document.querySelectorAll('.blessing-chip'),
            luckWheel: document.getElementById('luckWheel'),
            wheelResult: document.getElementById('wheelResult'),
            wheelPrize: document.getElementById('wheelPrize')
        };
        
        let state = {
            selectedStyle: 'red',
            isDrawing: false,
            isSpinning: false,
            particlesEnabled: true,
            fireworksEnabled: false,
            particles: [],
            clouds: []
        };
        
        function init() {
            initCanvas();
            initFortuneSticks();
            bindEvents();
            startCountdown();
        }
        
        function initCanvas() {
            const canvas = DOM.bgCanvas;
            const ctx = canvas.getContext('2d');
            
            function resize() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            resize();
            window.addEventListener('resize', resize);
            
            for (let i = 0; i < 6; i++) {
                state.clouds.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height * 0.6,
                    size: 30 + Math.random() * 40,
                    speed: 0.1 + Math.random() * 0.2,
                    opacity: 0.1 + Math.random() * 0.15
                });
            }
            
            function drawCloud(cloud) {
                ctx.save();
                ctx.globalAlpha = cloud.opacity;
                ctx.fillStyle = '#FBBF24';
                ctx.shadowBlur = 20;
                ctx.shadowColor = 'rgba(251, 191, 36, 0.5)';
                
                ctx.beginPath();
                ctx.arc(cloud.x, cloud.y, cloud.size, 0, Math.PI * 2);
                ctx.arc(cloud.x + cloud.size * 0.6, cloud.y - cloud.size * 0.2, cloud.size * 0.7, 0, Math.PI * 2);
                ctx.arc(cloud.x - cloud.size * 0.5, cloud.y + cloud.size * 0.1, cloud.size * 0.6, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
            
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                const gradient = ctx.createRadialGradient(
                    canvas.width / 2, canvas.height, 0,
                    canvas.width / 2, canvas.height, canvas.height
                );
                gradient.addColorStop(0, 'rgba(127, 29, 29, 0.3)');
                gradient.addColorStop(1, 'rgba(10, 10, 10, 1)');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                if (state.particlesEnabled) {
                    state.clouds.forEach(cloud => {
                        cloud.x += cloud.speed;
                        if (cloud.x > canvas.width + cloud.size * 2) {
                            cloud.x = -cloud.size * 2;
                        }
                        drawCloud(cloud);
                    });
                }
                
                for (let i = state.particles.length - 1; i >= 0; i--) {
                    const p = state.particles[i];
                    p.x += p.vx;
                    p.y += p.vy;
                    p.life--;
                    
                    if (p.life <= 0) {
                        state.particles.splice(i, 1);
                        continue;
                    }
                    
                    ctx.save();
                    ctx.globalAlpha = p.life / p.maxLife;
                    ctx.fillStyle = p.color;
                    ctx.shadowBlur = 8;
                    ctx.shadowColor = p.color;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size * (p.life / p.maxLife), 0, Math.PI * 2);
                    ctx.fill();
                    ctx.restore();
                }
                
                if (state.fireworksEnabled && Math.random() > 0.97) {
                    createFirework();
                }
                
                requestAnimationFrame(animate);
            }
            
            animate();
            
            document.addEventListener('mousemove', (e) => {
                if (state.particlesEnabled && Math.random() > 0.7) {
                    state.particles.push({
                        x: e.clientX,
                        y: e.clientY,
                        vx: (Math.random() - 0.5) * 2,
                        vy: (Math.random() - 0.5) * 2,
                        size: 2 + Math.random() * 2,
                        life: 30,
                        maxLife: 30,
                        color: Math.random() > 0.5 ? '#FBBF24' : '#DC2626'
                    });
                    
                    if (state.particles.length > 100) {
                        state.particles.shift();
                    }
                }
            });
        }
        
        function createFirework() {
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * window.innerHeight * 0.5;
            const colors = ['#FBBF24', '#DC2626', '#F97316', '#FCD34D'];
            
            for (let i = 0; i < 40; i++) {
                const angle = (Math.PI * 2 * i) / 40;
                const speed = 2 + Math.random() * 4;
                state.particles.push({
                    x: x,
                    y: y,
                    vx: Math.cos(angle) * speed,
                    vy: Math.sin(angle) * speed,
                    size: 3,
                    life: 50,
                    maxLife: 50,
                    color: colors[Math.floor(Math.random() * colors.length)]
                });
            }
        }
        
        function createRedPacketRain() {
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const packet = document.createElement('div');
                    packet.className = 'red-packet';
                    packet.textContent = 'ğŸ§§';
                    packet.style.left = Math.random() * window.innerWidth + 'px';
                    packet.style.animationDuration = (3 + Math.random() * 2) + 's';
                    document.body.appendChild(packet);
                    
                    setTimeout(() => packet.remove(), 5000);
                }, i * 100);
            }
        }
        
        function initFortuneSticks() {
            DOM.fortuneSticks.innerHTML = '';
            for (let i = 0; i < 12; i++) {
                const stick = document.createElement('div');
                stick.className = 'fortune-stick';
                stick.style.height = (100 + Math.random() * 50) + 'px';
                stick.style.transform = `rotate(${(Math.random() - 0.5) * 8}deg)`;
                DOM.fortuneSticks.appendChild(stick);
            }
        }
        
        function startCountdown() {
            function update() {
                const now = Date.now();
                const distance = CONFIG.springFestival - now;
                
                if (distance <= 0) {
                    DOM.days.textContent = '00';
                    DOM.hours.textContent = '00';
                    DOM.minutes.textContent = '00';
                    DOM.seconds.textContent = '00';
                    DOM.horseRunner.style.left = '90%';
                    return;
                }
                
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                
                DOM.days.textContent = String(days).padStart(2, '0');
                DOM.hours.textContent = String(hours).padStart(2, '0');
                DOM.minutes.textContent = String(minutes).padStart(2, '0');
                DOM.seconds.textContent = String(seconds).padStart(2, '0');
                
                const totalSeconds = Math.floor(distance / 1000);
                const yearSeconds = 365 * 24 * 60 * 60;
                const progress = Math.max(0, Math.min(90, 90 - (totalSeconds / yearSeconds) * 80));
                DOM.horseRunner.style.left = progress + '%';
            }
            
            update();
            setInterval(update, 1000);
        }
        
        function bindEvents() {
            DOM.blessingChips.forEach(chip => {
                chip.addEventListener('click', () => {
                    const blessing = chip.dataset.blessing;
                    DOM.blessingInput.value = blessing;
                    createRedPacketRain();
                });
            });
            
            DOM.lanternWall.addEventListener('click', (e) => {
                const lantern = e.target.closest('.lantern');
                if (lantern) {
                    const blessing = lantern.dataset.blessing;
                    const rect = lantern.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;
                    
                    for (let i = 0; i < 3; i++) {
                        setTimeout(() => {
                            for (let j = 0; j < 8; j++) {
                                const angle = (Math.PI * 2 * j) / 8;
                                const speed = 3 + Math.random() * 3;
                                state.particles.push({
                                    x: centerX,
                                    y: centerY,
                                    vx: Math.cos(angle) * speed,
                                    vy: Math.sin(angle) * speed,
                                    size: 3 + Math.random() * 2,
                                    life: 50,
                                    maxLife: 50,
                                    color: Math.random() > 0.5 ? '#FBBF24' : '#DC2626'
                                });
                            }
                        }, i * 100);
                    }
                    
                    lantern.style.transform = 'rotate(0deg) scale(1.1)';
                    setTimeout(() => {
                        lantern.style.transform = 'rotate(0deg) scale(1)';
                    }, 300);
                }
            });
            
            DOM.sendBlessing.addEventListener('click', () => {
                const text = DOM.blessingInput.value.trim();
                if (text) {
                    createRedPacketRain();
                    DOM.blessingInput.value = '';
                }
            });
            
            DOM.drawBtn.addEventListener('click', drawFortune);
            
            DOM.styleCards.forEach(card => {
                card.addEventListener('click', () => {
                    DOM.styleCards.forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');
                    state.selectedStyle = card.dataset.style;
                });
            });
            
            DOM.generateCard.addEventListener('click', generateCard);
            DOM.downloadCard.addEventListener('click', downloadCard);
            
            DOM.particleBtn.addEventListener('click', () => {
                state.particlesEnabled = !state.particlesEnabled;
                DOM.particleBtn.classList.toggle('active', state.particlesEnabled);
            });
            
            DOM.fireworkBtn.addEventListener('click', () => {
                state.fireworksEnabled = !state.fireworksEnabled;
                DOM.fireworkBtn.classList.toggle('active', state.fireworksEnabled);
                if (state.fireworksEnabled) {
                    for (let i = 0; i < 5; i++) {
                        setTimeout(() => createFirework(), i * 200);
                    }
                }
            });
            
            DOM.redPacketBtn.addEventListener('click', createRedPacketRain);
            
            if (DOM.luckWheel) {
                DOM.luckWheel.addEventListener('click', spinWheel);
            }
        }
        
        function spinWheel() {
            if (state.isSpinning) return;
            state.isSpinning = true;
            
            const prizes = [
                'ğŸ´ é©¬åˆ°æˆåŠŸç¥ç¦',
                'âœ¨ é¾™é©¬ç²¾ç¥åŠ æŒ',
                'ğŸ† ä¸€é©¬å½“å…ˆå¥½è¿',
                'ğŸ’° è´¢è¿äº¨é€šç¦è¢‹',
                'ğŸ“ å­¦ä¸šæœ‰æˆé”¦å›Š',
                'â¤ï¸ çˆ±æƒ…ç¾æ»¡ç¬¦'
            ];
            
            const angle = Math.floor(Math.random() * 360) + 720;
            const duration = 3000;
            
            DOM.luckWheel.style.transition = `transform ${duration}ms cubic-bezier(0.25, 0.1, 0.25, 1)`;
            DOM.luckWheel.style.transform = `rotate(${angle}deg)`;
            
            const centerX = DOM.luckWheel.getBoundingClientRect().left + DOM.luckWheel.offsetWidth / 2;
            const centerY = DOM.luckWheel.getBoundingClientRect().top + DOM.luckWheel.offsetHeight / 2;
            
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    state.particles.push({
                        x: centerX,
                        y: centerY,
                        vx: (Math.random() - 0.5) * 10,
                        vy: (Math.random() - 0.5) * 10,
                        size: 3 + Math.random() * 2,
                        life: 40,
                        maxLife: 40,
                        color: Math.random() > 0.5 ? '#FBBF24' : '#DC2626'
                    });
                }, i * 100);
            }
            
            setTimeout(() => {
                const prizeIndex = Math.floor((360 - (angle % 360)) / 60) % 6;
                const prize = prizes[prizeIndex];
                
                DOM.wheelPrize.textContent = prize;
                DOM.wheelResult.style.display = 'block';
                
                createRedPacketRain();
                
                state.isSpinning = false;
                
                setTimeout(() => {
                    DOM.wheelResult.style.display = 'none';
                }, 3000);
            }, duration + 500);
        }
        
        function drawFortune() {
            if (state.isDrawing) return;
            state.isDrawing = true;
            DOM.drawBtn.disabled = true;
            DOM.fortuneResult.classList.remove('show');
            
            const sticks = DOM.fortuneSticks.querySelectorAll('.fortune-stick');
            sticks.forEach((stick, index) => {
                setTimeout(() => {
                    stick.classList.add('shaking');
                }, index * 50);
            });
            
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const x = DOM.drawBtn.getBoundingClientRect().left + DOM.drawBtn.offsetWidth / 2;
                    const y = DOM.drawBtn.getBoundingClientRect().top;
                    state.particles.push({
                        x: x,
                        y: y,
                        vx: (Math.random() - 0.5) * 6,
                        vy: (Math.random() - 0.5) * 6,
                        size: 3,
                        life: 40,
                        maxLife: 40,
                        color: '#FBBF24'
                    });
                }, i * 100);
            }
            
            setTimeout(() => {
                sticks.forEach((stick, index) => {
                    setTimeout(() => {
                        stick.classList.remove('shaking');
                    }, index * 50);
                });
                
                const fortune = CONFIG.fortunes[Math.floor(Math.random() * CONFIG.fortunes.length)];
                DOM.fortuneLevel.textContent = fortune.level;
                DOM.fortuneText.textContent = fortune.text;
                DOM.fortuneResult.classList.add('show');
                
                for (let i = 0; i < 15; i++) {
                    const x = DOM.fortuneResult.getBoundingClientRect().left + DOM.fortuneResult.offsetWidth / 2;
                    const y = DOM.fortuneResult.getBoundingClientRect().top + DOM.fortuneResult.offsetHeight / 2;
                    state.particles.push({
                        x: x,
                        y: y,
                        vx: (Math.random() - 0.5) * 8,
                        vy: (Math.random() - 0.5) * 8,
                        size: 4,
                        life: 50,
                        maxLife: 50,
                        color: '#DC2626'
                    });
                }
                
                state.isDrawing = false;
                DOM.drawBtn.disabled = false;
            }, 2000);
        }
        
        function generateCard() {
            const canvas = DOM.cardCanvas;
            const ctx = canvas.getContext('2d');
            const style = CONFIG.cardStyles[state.selectedStyle];
            
            try {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                gradient.addColorStop(0, style.bg[0]);
                gradient.addColorStop(1, style.bg[1]);
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.strokeStyle = style.border;
                ctx.lineWidth = 8;
                ctx.strokeRect(10, 10, canvas.width - 20, canvas.height - 20);
                
                ctx.strokeStyle = style.border;
                ctx.lineWidth = 2;
                ctx.strokeRect(20, 20, canvas.width - 40, canvas.height - 40);
                
                for (let i = 0; i < 4; i++) {
                    ctx.beginPath();
                    ctx.arc(30 + i * 115, 30, 5, 0, Math.PI * 2);
                    ctx.fillStyle = style.accent;
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.arc(30 + i * 115, canvas.height - 30, 5, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                ctx.font = '50px Arial';
                ctx.textAlign = 'center';
                ctx.fillStyle = style.text;
                ctx.fillText('ğŸ´', canvas.width / 2, 70);
                
                ctx.font = 'bold 36px "Ma Shan Zheng", cursive';
                ctx.fillStyle = style.text;
                ctx.fillText('ä¸™åˆé©¬å¹´', canvas.width / 2, 120);
                
                const recipient = DOM.recipientInput.value || 'æœ‹å‹';
                ctx.font = '18px "Noto Serif SC", serif';
                ctx.fillStyle = style.accent;
                ctx.fillText('è‡´ï¼š' + recipient, canvas.width / 2, 160);
                
                const message = DOM.messageInput.value || 'é©¬åˆ°æˆåŠŸï¼Œä¸‡äº‹å¦‚æ„ï¼';
                ctx.font = '14px "Noto Serif SC", serif';
                ctx.fillStyle = style.text;
                
                const maxWidth = canvas.width - 80;
                const lines = wrapText(ctx, message, maxWidth);
                let y = 190;
                lines.forEach(line => {
                    if (y < canvas.height - 40) {
                        ctx.fillText(line, canvas.width / 2, y);
                        y += 22;
                    }
                });
                
                const sender = DOM.senderInput.value || 'åŒ¿å';
                ctx.font = '14px "Noto Serif SC", serif';
                ctx.fillStyle = style.accent;
                ctx.textAlign = 'right';
                ctx.fillText('â€”â€” ' + sender, canvas.width - 35, canvas.height - 30);
                
                for (let i = 0; i < 8; i++) {
                    setTimeout(() => {
                        const x = DOM.generateCard.getBoundingClientRect().left + DOM.generateCard.offsetWidth / 2;
                        const y = DOM.generateCard.getBoundingClientRect().top;
                        state.particles.push({
                            x: x,
                            y: y,
                            vx: (Math.random() - 0.5) * 6,
                            vy: (Math.random() - 0.5) * 6,
                            size: 3,
                            life: 40,
                            maxLife: 40,
                            color: style.accent
                        });
                    }, i * 80);
                }
            } catch (error) {
                console.error('è´ºå¡ç”Ÿæˆå¤±è´¥:', error);
            }
        }
        
        function wrapText(ctx, text, maxWidth) {
            const lines = [];
            let currentLine = '';
            
            for (let i = 0; i < text.length; i++) {
                const testLine = currentLine + text[i];
                const metrics = ctx.measureText(testLine);
                
                if (metrics.width > maxWidth && currentLine !== '') {
                    lines.push(currentLine);
                    currentLine = text[i];
                } else {
                    currentLine = testLine;
                }
            }
            
            if (currentLine) {
                lines.push(currentLine);
            }
            
            return lines;
        }
        
        function downloadCard() {
            const canvas = DOM.cardCanvas;
            const link = document.createElement('a');
            link.download = 'é©¬å¹´è´ºå¡.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    })();
    </script>
</body>
</html>
